<div class="flex flex-row justify-end items-start mx-auto max-w-[72px] w-full h-full gap-2">

  <!-- For each time of day -->
  <div *ngFor="let tod of ['morning', 'afternoon', 'evening', 'night']" class="w-full h-full flex flex-col justify-start items-center gap-2">

    <!-- DEFAULT ICON MODE -->
    <ng-container *ngIf="pillboxMode===PillboxIconMode.ICON_DEFAULT">
      <!-- ITER MEDICATION FOR THE DAY -->
      <div *ngFor="let i of range()">

        <!-- IF BOX SHOULD BE ICON -->
        <ng-container *ngIf="schedule[tod] > i">

          <!-- MEDICATION IS BOTTLE -->
          <ng-container *ngIf="uom===MedicineUom.BOTTLE">
            <img ngSrc="/assets/icons/bottle.png" alt="bottle" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS CAPSULE -->
          <ng-container *ngIf="uom===MedicineUom.CAPSULE">
            <img *ngIf="schedule[tod]-i !== 0.5" ngSrc="/assets/icons/pill.svg" alt="capsule" height="20" width="20" />
            <img *ngIf="schedule[tod]-i === 0.5" ngSrc="/assets/icons/pill_half_v4.svg" alt="half-capsule" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS DROP -->
          <ng-container *ngIf="uom===MedicineUom.DROP">
            <img ngSrc="/assets/icons/drop.png" alt="drop" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS INHALER -->
          <ng-container *ngIf="uom===MedicineUom.INHALER">
            <img ngSrc="/assets/icons/inhaler.png" alt="inhaler" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS INJECTION -->
          <ng-container *ngIf="uom===MedicineUom.INJECTION">
            <img ngSrc="/assets/icons/injection.svg" alt="injection" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS LOTION -->
          <ng-container *ngIf="uom===MedicineUom.LOTION">
            <img ngSrc="/assets/icons/ointment.png" alt="lotion" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS OINTMENT -->
          <ng-container *ngIf="uom===MedicineUom.OINTMENT">
            <img ngSrc="/assets/icons/ointment.png" alt="ointment" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS PACKET -->
          <ng-container *ngIf="uom===MedicineUom.PACKET">
            <img ngSrc="/assets/icons/packet.png" alt="packet" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS POWDER -->
          <ng-container *ngIf="uom===MedicineUom.POWDER">
            <img ngSrc="/assets/icons/scoop.png" alt="powder" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS SC (Subcutaneous) -->
          <ng-container *ngIf="uom===MedicineUom.SC">
            <img ngSrc="/assets/icons/injection.svg" alt="sc" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS SYRUP -->
          <ng-container *ngIf="uom===MedicineUom.SYRUP">
            <img ngSrc="/assets/icons/syrup.svg" alt="syrup" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS TAG -->
          <ng-container *ngIf="uom===MedicineUom.TAG">
            <img ngSrc="/assets/icons/tag.svg" alt="tag" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS TABLET -->
          <ng-container *ngIf="uom===MedicineUom.TABLET">
            <img *ngIf="schedule[tod]-i !== 0.5" ngSrc="/assets/icons/tablet.png" alt="tablet" height="20" width="20" />
            <img *ngIf="schedule[tod]-i === 0.5" ngSrc="/assets/icons/half_tablet.svg" alt="half-tablet" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS TUBE -->
          <ng-container *ngIf="uom===MedicineUom.TUBE">
            <img ngSrc="/assets/icons/tube.png" alt="tube" height="20" width="20" />
          </ng-container>

        </ng-container>

        <!-- IF BOX SHOULD BE BLANK -->
        <ng-container *ngIf="schedule[tod] <= i">
          <img ngSrc="/assets/icons/blank.svg" alt="blank" height="20" width="20" class="opacity-50" />
        </ng-container>

      </div>
    </ng-container>

    <!-- LABELLED ICON MODE -->
    <ng-container *ngIf="pillboxMode===PillboxIconMode.ICON_LABELED">
      <!-- ITER MEDICATION FOR THE DAY -->
      <div *ngFor="let i of range()" [class.hidden]="i>0">

        <!-- IF BOX SHOULD BE ICON -->
        <ng-container *ngIf="schedule[tod] > i">

          <!-- MEDICATION IS BOTTLE -->
          <ng-container *ngIf="uom===MedicineUom.BOTTLE">
            <img ngSrc="/assets/icons/bottle.png" alt="bottle" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS CAPSULE -->
          <ng-container *ngIf="uom===MedicineUom.CAPSULE && i===0">
            <div class="flex flex-col justify-center items-center p-px rounded-[2px] bg-black overflow-hidden">
              <div class="bg-white rounded-[1px] flex justify-center items-center">
                <img ngSrc="/assets/icons/pill.svg" alt="capsule" height="14" width="14" />
              </div>
              <span class="font-mono text-white text-[11px] text-center">{{schedule[tod]}}</span>
            </div>
          </ng-container>

          <!-- MEDICATION IS DROP -->
          <ng-container *ngIf="uom===MedicineUom.DROP">
            <img ngSrc="/assets/icons/drop.png" alt="drop" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS INHALER -->
          <ng-container *ngIf="uom===MedicineUom.INHALER">
            <img ngSrc="/assets/icons/inhaler.png" alt="inhaler" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS INJECTION -->
          <ng-container *ngIf="uom===MedicineUom.INJECTION && i===0">
            <div class="flex flex-col justify-center items-center p-px rounded-[2px] bg-black overflow-hidden">
              <div class="bg-white rounded-[1px] flex justify-center items-center">
                <img ngSrc="/assets/icons/injection.svg" alt="injection" height="20" width="20" />
              </div>
              <span class="font-mono text-white text-[11px] text-center">{{schedule[tod]}}</span>
            </div>
          </ng-container>

          <!-- MEDICATION IS LOTION -->
          <ng-container *ngIf="uom===MedicineUom.LOTION">
            <img ngSrc="/assets/icons/ointment.png" alt="lotion" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS OINTMENT -->
          <ng-container *ngIf="uom===MedicineUom.OINTMENT">
            <img ngSrc="/assets/icons/ointment.png" alt="ointment" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS PACKET -->
          <ng-container *ngIf="uom===MedicineUom.PACKET && i===0">
            <div class="flex flex-col justify-center items-center p-px rounded-[2px] bg-black overflow-hidden">
              <div class="bg-white rounded-[1px] flex justify-center items-center">
                <img ngSrc="/assets/icons/packet.png" alt="packet" height="20" width="20" />
              </div>
              <span class="font-mono text-white text-[11px] text-center">{{schedule[tod]}}</span>
            </div>
          </ng-container>

          <!-- MEDICATION IS POWDER -->
          <ng-container *ngIf="uom===MedicineUom.POWDER">
            <img ngSrc="/assets/icons/scoop.png" alt="powder" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS SC -->
          <ng-container *ngIf="uom===MedicineUom.SC && i===0">
            <div class="flex flex-col justify-center items-center p-px rounded-[2px] bg-black overflow-hidden">
              <div class="bg-white rounded-[1px] flex justify-center items-center">
                <img ngSrc="/assets/icons/injection.svg" alt="sc" height="20" width="20" />
              </div>
              <span class="font-mono text-white text-[11px] text-center">{{schedule[tod]}}</span>
            </div>
          </ng-container>

          <!-- MEDICATION IS SYRUP -->
          <ng-container *ngIf="uom===MedicineUom.SYRUP">
            <img ngSrc="/assets/icons/syrup.svg" alt="syrup" height="20" width="20" />
          </ng-container>

          <!-- MEDICATION IS TAG -->
          <ng-container *ngIf="uom===MedicineUom.TAG">
            <img ngSrc="/assets/icons/tag.svg" alt="tag" height="30" width="30" />
          </ng-container>

          <!-- MEDICATION IS TABLET -->
          <ng-container *ngIf="uom===MedicineUom.TABLET && i===0">
            <div class="flex flex-col justify-center items-center p-px rounded-[2px] bg-black overflow-hidden">
              <div class="bg-white rounded-[1px] flex justify-center items-center">
                <img ngSrc="/assets/icons/tablet.png" alt="tablet" height="14" width="14" />
              </div>
              <span class="font-mono text-white text-[11px] text-center">{{schedule[tod]}}</span>
            </div>
          </ng-container>

          <!-- MEDICATION IS TUBE -->
          <ng-container *ngIf="uom===MedicineUom.TUBE">
            <img ngSrc="/assets/icons/tube.png" alt="tube" height="20" width="20" />
          </ng-container>

        </ng-container>

        <!-- IF BOX SHOULD BE BLANK -->
        <ng-container *ngIf="schedule[tod] <= i">
          <div class="bg-black opacity-[12.5%] rounded-[2px] w-[16px] h-[13px]"></div>
        </ng-container>

      </div>
    </ng-container>

  </div>
</div>